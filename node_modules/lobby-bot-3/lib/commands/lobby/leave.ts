import { SlashSubcommand } from "discord-slash"
import { CommandInteraction, GuildMember } from "discord.js"
import { Channel, Lobby } from "../../lobbies"

export default new SlashSubcommand(
  "leave",
  "Leave the lobby",
  handle,
  cmd => cmd,
);

async function handle(interaction: CommandInteraction) {
  const channel = interaction.channel as Channel;
  const lobby = await Lobby.get(channel);
  lobby.removePlayers(interaction.member as GuildMember);
  await interaction.reply(await lobby.print(channel));
}
