import { SlashSubcommand } from "discord-slash"
import { CommandInteraction } from "discord.js"
import { Channel, Lobby } from "../../lobbies"

export default new SlashSubcommand(
  "create",
  "Create a new lobby in a new thread",
  handle,
  cmd => cmd,
);

async function handle(interaction: CommandInteraction) {
  const channel = interaction.channel as Channel;
  const lobby = await Lobby.get(channel);  
  const shuffle = await lobby.getShuffle();
  await interaction.reply(await lobby.printMatch(channel, shuffle));
}